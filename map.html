<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>智能社—http://www.zhinengshe.com</title>
    <style>
        #box{
            width:80%;
            height:300px;
            border: 1px solid #000;
            margin: 0 auto;
        }
    </style>
	 <script src="http://api.map.baidu.com/api?v=2.0&ak=EAc9690e060a06cfe50a260d491afd15"></script>

    <script>
        if(navigator.geolocation){
            var timer=navigator.geolocation.watchPosition(function(ev){//实时获取更新位置
                var longitude=ev.coords.longitude; //经度
                var latitude=ev.coords.latitude;//纬度

                window.onload=function(){
            //生成地图
				var map = new BMap.Map("box");
	
				//设置中心点，以及缩放
				var point = new BMap.Point(longitude, latitude);
	
				map.centerAndZoom(point, 15);
        };
            },function(err){
                alert('获取失败了');
            },{
                frequency:1000
            });

            document.onclick=function(){
                navigator.geolocation.clearWatch(timer);//清除实时监听
            };
        }else{
            alert('不支持地理定位');
        }
		
		
    </script>
</head>
<body>

<div id="box">

    </div>
</body>
</html>




